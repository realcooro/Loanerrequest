<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_fix">
    <sys_script_fix action="INSERT_OR_UPDATE">
        <before>false</before>
        <description/>
        <name>Update LNRs from Global</name>
        <record_for_rollback>true</record_for_rollback>
        <script><![CDATA[(function executeRule(current, previous /*null when async*/) {

	// When closed complete is triggered it also inactivates the task
	var loanerRecs = new GlideRecord('x_cdltd_loaner_req_loaner_request');
	loanerRecs.addQuery('state','!=',3); //not Closed Complete
	loanerRecs.query();
	
	while(loanerRecs.next()){
		loanerRecs.setValue('state',3); //mark Closed Complete
		loanerRecs.update();
	}

})(current, previous);]]></script>
        <sys_class_name>sys_script_fix</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-11-22 07:25:43</sys_created_on>
        <sys_id>b3a20f939f62f5107f448698b224ab0e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Update LNRs from Global</sys_name>
        <sys_package display_value="Loaner Request" source="x_cdltd_loaner_req">c1735e469f62b1107f448698b224abb4</sys_package>
        <sys_policy/>
        <sys_scope display_value="Loaner Request">c1735e469f62b1107f448698b224abb4</sys_scope>
        <sys_update_name>sys_script_fix_b3a20f939f62f5107f448698b224ab0e</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-11-22 07:25:43</sys_updated_on>
        <unloadable>false</unloadable>
    </sys_script_fix>
</record_update>
